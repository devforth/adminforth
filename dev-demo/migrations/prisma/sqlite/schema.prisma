generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url = env("SQLITE_FILE_URL")
}

model adminuser {
  id            String     @id
  email         String     @unique
  password_hash String
  role          String
  created_at    DateTime
  secret2fa     String?
  responsible_person String?
  avatar        String?
}

model cars {
  id             String @id
  model          String 
  price          Float
  created_at     DateTime @default(now())

  engine_type    String?
  engine_power   Int?
  production_year Int?

  description    String? 
  listed         Boolean @default(false)
  mileage        Float?
  color          String?
  body_type      String?

  photos         String?

  seller_id      String?
  seller         String?

  promo_picture  String?
  generated_promo_picture  String?

}

model audit_logs {
  id                String      @id
  created_at        DateTime
  resource_id       String
  user_id           String
  action            String
  diff              String?
  record_id         String?
  ip_address        String? 
}

  model passkeys {
    id                      String @id
    credential_id           String  
    user_id                 String
    meta                    String
    @@index([user_id])
    @@index([credential_id])
  }

  model cars_description_image {
    id          String   @id
    created_at  DateTime
    resource_id String
    record_id   String
    image_path  String
  }

  model translations {
    id              String   @id
    en_string       String
    created_at      DateTime
    uk_string       String?  // translation for Ukrainian language
    ja_string       String?  // translation for Japanese language
    fr_string       String?  // translation for French language
    es_string       String?  // translation for Spanish language
    ptBR_string      String?  // Brazilian Portuguese translation using BCP47 code (pt-BR)
    category        String
    source          String?
    completedLangs   String?
    
    // we need both indexes on en_string+category and separately on category
    @@index([en_string, category])
    @@index([category])
    @@index([completedLangs])
}

model jobs {
  id          String @id
  created_at  DateTime
  finished_at DateTime?
  started_by  String
  name        String
  state       String?
  progress    String
  status      String
  job_handler_name String
}